(function(f){function j(a){if(!a)return!0;for(var c=a.length-1,b;0<=c;)if(b=a[c--],"​"!==b&&"﻿"!==b)return!1;return!0}function k(a,c){for(;a;){if(b.TEXT_NODE==a.nodeType)return a;for(var d=a.firstChild;d;d=d.nextSibling){var e=k(d,c);if(e)return e}if(b.isTextContainer(a))return a;a=a.nextSibling}return null}function l(a,c){for(;a;){if(b.TEXT_NODE==a.nodeType)return a;for(var d=a.lastChild;d;d=d.previousSibling){var e=l(d,c);if(e)return e}if(b.isTextContainer(a))return a;a=a.previousSibling}return null}
function m(a){if(a)for(var c=a.firstChild;c;){if(1==c.nodeType)m(c);else if(3==c.nodeType)for(var b;(b=c.nextSibling)&&3==b.nodeType;){var e=b.nodeValue;null!=e&&e.length&&(c.nodeValue+=e);a.removeChild(b)}c=c.nextSibling}}var b={},h=null,o=/^\s*$/,p=/^\d+$/;b.DOM_VK_DELETE=8;b.DOM_VK_LEFT=37;b.DOM_VK_UP=38;b.DOM_VK_RIGHT=39;b.DOM_VK_DOWN=40;b.DOM_VK_ENTER=13;b.ELEMENT_NODE=1;b.ATTRIBUTE_NODE=2;b.TEXT_NODE=3;b.CDATA_SECTION_NODE=4;b.ENTITY_REFERENCE_NODE=5;b.ENTITY_NODE=6;b.PROCESSING_INSTRUCTION_NODE=
7;b.COMMENT_NODE=8;b.DOCUMENT_NODE=9;b.DOCUMENT_TYPE_NODE=10;b.DOCUMENT_FRAGMENT_NODE=11;b.NOTATION_NODE=12;b.CHARACTER_UNIT="character";b.WORD_UNIT="word";b.BREAK_ELEMENT="br";b.PARAGRAPH_ELEMENT="p";b.CONTENT_STUB_ELEMENTS="img hr iframe param link meta input frame col base area".split(" ");b.BLOCK_ELEMENTS="body p div pre ul ol li table tbody td th fieldset form blockquote dl dt dd dir center address h1 h2 h3 h4 h5 h6".split(" ");b.TEXT_CONTAINER_ELEMENTS="body p div pre span b strong i li td th blockquote dt dd center address h1 h2 h3 h4 h5 h6 ins del".split(" ");
b.STUB_ELEMENTS=b.CONTENT_STUB_ELEMENTS.slice();b.STUB_ELEMENTS.push(b.BREAK_ELEMENT);var n=b.CONTENT_STUB_ELEMENTS.join(", ");b.getKeyChar=function(a){return String.fromCharCode(a.which)};b.getClass=function(a,c,b){c||(c=document.body);a="."+a.split(" ").join(".");b&&(a=b+a);return f.makeArray(f(c).find(a))};b.getId=function(a,c){c||(c=document);return element=c.getElementById(a)};b.getTag=function(a,c){c||(c=document);return f.makeArray(f(c).find(a))};b.getElementWidth=function(a){return a.offsetWidth};
b.getElementHeight=function(a){return a.offsetHeight};b.getElementDimensions=function(a){return{width:b.getElementWidth(a),height:b.getElementHeight(a)}};b.empty=function(a){if(a)return f(a).empty()};b.remove=function(a){if(a)return f(a).remove()};b.prepend=function(a,c){f(a).prepend(c)};b.append=function(a,c){f(a).append(c)};b.insertBefore=function(a,c){f(a).before(c)};b.insertAfter=function(a,c){if(a&&c){var b=a.nextSibling,e=a.parentNode;return b?e.insertBefore(c,b):e.appendChild(c)}};b.getHtml=
function(a){return f(a).html()};b.setHtml=function(a,c){a&&f(a).html(c)};b.removeWhitespace=function(a){f(a).contents().filter(function(){return this.nodeType!=ice.dom.TEXT_NODE&&"UL"==this.nodeName||"OL"==this.nodeName?(b.removeWhitespace(this),!1):this.nodeType!=ice.dom.TEXT_NODE?!1:!/\S/.test(this.nodeValue)}).remove()};b.contents=function(a){return f.makeArray(f(a).contents())};b.extractContent=function(a){for(var c=document.createDocumentFragment(),b;b=a.firstChild;)c.appendChild(b);return c};
b.getNode=function(a,c){if(!a)return null;a=a.$||a;return a.nodeType!=b.TEXT_NODE&&b.is(a,c)?a:b.parents(a,c)[0]||null};b.getParents=function(a,c,b){for(var a=f(a).parents(c),c=a.length,e=[],i=0;i<c&&a[i]!==b;i++)e.push(a[i]);return e};b.hasBlockChildren=function(a){for(var c=a.childNodes.length,d=0;d<c;d++)if(a.childNodes[d].nodeType===b.ELEMENT_NODE&&!0===b.isBlockElement(a.childNodes[d]))return!0;return!1};b.removeTag=function(a,c){f(a).find(c).replaceWith(function(){return f(this).contents()});
return a};b.stripEnclosingTags=function(a,c){var b=f(a);b.find("*").not(c).replaceWith(function(){var a=f(),c;try{c=f(this),a=c.contents()}catch(b){}0===a.length&&c.remove();return a});return b[0]};b.getSiblings=function(a,c,b,e){if(!0===b)return"prev"===c?f(a).prevAll():f(a).nextAll();b=[];if("prev"===c)for(;a.previousSibling;){a=a.previousSibling;if(a===e)break;b.push(a)}else for(;a.nextSibling;){a=a.nextSibling;if(a===e)break;b.push(a)}return b};b.getNodeTextContent=function(a){return f(a).text()};
b.getNodeStubContent=function(a){return f(a).find(n)};b.hasNoTextOrStubContent=function(a){var c=b.getNodeTextContent(a);return!j(c)?!1:!a.firstChild?!0:0===f(a).find(n).length};b.isEmptyTextNode=function(a){return!a||b.TEXT_NODE!==a.nodeType?!1:0===a.length?!0:j(a.nodeValue)};b.getNodeCharacterLength=function(a){return b.getNodeTextContent(a).length+f(a).find(b.STUB_ELEMENTS.join(", ")).length};b.setNodeTextContent=function(a,c){return f(a).text(c)};b.getTagName=function(a){return a&&a.tagName&&
a.tagName.toLowerCase()||null};b.getIframeDocument=function(a){var c=null;a.contentDocument?c=a.contentDocument:a.contentWindow?c=a.contentWindow.document:a.document&&(c=a.document);return c};b.isBlockElement=function(a){return-1!=b.BLOCK_ELEMENTS.indexOf(a.nodeName.toLowerCase())};b.isStubElement=function(a){return-1!=b.STUB_ELEMENTS.indexOf(a.nodeName.toLowerCase())};b.removeBRFromChild=function(a){if(a&&a.hasChildNodes())for(var c=0;c<a.childNodes.length;c++){var b=a.childNodes[c];b&&ice.dom.BREAK_ELEMENT==
ice.dom.getTagName(b)&&b.parentNode.removeChild(b)}};b.isChildOf=function(a,b){try{for(;a&&a.parentNode;){if(a.parentNode===b)return!0;a=a.parentNode}}catch(d){}return!1};b.isChildOfTagName=function(a,b){try{for(;a&&a.parentNode;){if(a.parentNode&&a.parentNode.tagName&&a.parentNode.tagName.toLowerCase()===b)return a.parentNode;a=a.parentNode}}catch(d){}return!1};b.isChildOfTagNames=function(a,b){try{for(;a&&a.parentNode;){if(a.parentNode&&a.parentNode.tagName){tagName=a.parentNode.tagName.toLowerCase();
for(var d=0;d<b.length;d++)if(tagName===b[d])return a.parentNode}a=a.parentNode}}catch(e){}return null};b.isChildOfClassName=function(a,b){try{for(;a&&a.parentNode;){if(f(a.parentNode).hasClass(b))return a.parentNode;a=a.parentNode}}catch(d){}return null};b.cloneNode=function(a,b){void 0===b&&(b=!0);return f(a).clone(b)};b.bind=function(a,b,d){return f(a).bind(b,d)};b.unbind=function(a,b,d){return f(a).unbind(b,d)};b.attr=function(a,b,d){return d?f(a).attr(b,d):f(a).attr(b)};b.replaceWith=function(a,
b){return f(a).replaceWith(b)};b.removeAttr=function(a,b){f(a).removeAttr(b)};b.getElementsBetween=function(a,c){var d=[];if(a===c)return d;if(!0===b.isChildOf(c,a)){for(var e=a.childNodes.length,f=0;f<e&&a.childNodes[f]!==c;f++){if(!0===b.isChildOf(c,a.childNodes[f]))return b.arrayMerge(d,b.getElementsBetween(a.childNodes[f],c));d.push(a.childNodes[f])}return d}for(e=a.nextSibling;e;){if(!0===b.isChildOf(c,e))return d=b.arrayMerge(d,b.getElementsBetween(e,c));if(e===c)return d;d.push(e);e=e.nextSibling}for(var e=
b.getParents(a),f=b.getParents(c),e=b.arrayDiff(e,f,!0),f=e.length,g=0;g<f-1;g++)d=b.arrayMerge(d,b.getSiblings(e[g],"next"));return d=b.arrayMerge(d,b.getElementsBetween(e[e.length-1],c))};b.getCommonAncestor=function(a,c){for(var d=a;d;){if(!0===b.isChildOf(c,d))return d;d=d.parentNode}return null};b.getNextNode=function(a,c){if(a)for(;a.parentNode&&a!==c;){if(a.nextSibling){if(a.nextSibling.nodeType===b.TEXT_NODE&&0===a.nextSibling.length){a=a.nextSibling;continue}return b.getFirstChild(a.nextSibling)}a=
a.parentNode}return null};b.getNextContentNode=function(a,c){if(a)for(;a.parentNode&&a!==c;){if(a.nextSibling&&b.canContainTextElement(b.getBlockParent(a))){if(a.nextSibling.nodeType===b.TEXT_NODE&&0===a.nextSibling.length){a=a.nextSibling;continue}return a.nextSibling}if(a.nextElementSibling)return a.nextElementSibling;a=a.parentNode}return null};b.getPrevNode=function(a,c){if(a)for(;a.parentNode&&a!==c;){if(a.previousSibling){if(a.previousSibling.nodeType===b.TEXT_NODE&&0===a.previousSibling.length){a=
a.previousSibling;continue}return b.getLastChild(a.previousSibling)}a=a.parentNode}return null};b.getPrevContentNode=function(a,c){if(a)for(;a.parentNode&&a!==c;){if(a.previousSibling&&b.canContainTextElement(b.getBlockParent(a))){if(a.previousSibling.nodeType===b.TEXT_NODE&&0===a.previousSibling.length){a=a.previousSibling;continue}return a.previousSibling}if(a.previousElementSibling)return a.previousElementSibling;a=a.parentNode}return null};b.findPrevTextContainer=function(a,c){if(!a||a==c)return{node:c,
offset:0};if(a.parentNode&&b.isTextContainer(a.parentNode))return{node:a.parentNode,offset:b.getNodeIndex(a)};for(;a.previousSibling;){var d=l(a.previousSibling);if(d)return{node:d,offset:b.getNodeLength(d)};a=a.previousSibling}return b.findPrevTextContainer(a.parentNode&&a.parentNode.previousSibling,c)};b.findNextTextContainer=function(a,c){if(!a||a==c)return{node:c,offset:b.getNodeLength(c)};if(a.parentNode&&b.isTextContainer(a.parentNode))return{node:a.parentNode,offset:b.getNodeIndex(a)+1};for(;a.nextSibling;){var d=
k(a.nextSibling);if(d)return{node:d,offset:0};a=a.previousSibling}return b.findNextTextContainer(a.parentNode&&a.parentNode.nextSibling,c)};b.getNodeLength=function(a){return a?b.TEXT_NODE==a.nodeType?a.length:a.childNodes&&a.childNodes.length||0:0};b.isTextContainer=function(a){return a&&b.TEXT_NODE==a.nodeType||0<=b.TEXT_CONTAINER_ELEMENTS.indexOf((a.nodeName||"").toLowerCase())};b.getNodeIndex=function(a){for(var b=0;a=a.previousSibling;)++b;return b};b.canContainTextElement=function(a){return a&&
a.nodeName?-1!=b.TEXT_CONTAINER_ELEMENTS.lastIndexOf(a.nodeName.toLowerCase()):!1};b.getFirstChild=function(a){return a.firstChild?a.firstChild.nodeType===b.ELEMENT_NODE?b.getFirstChild(a.firstChild):a.firstChild:a};b.getLastChild=function(a){return a.lastChild?a.lastChild.nodeType===b.ELEMENT_NODE?b.getLastChild(a.lastChild):a.lastChild:a};b.removeEmptyNodes=function(a,c){for(var d=f(a).find(":empty"),e=d.length;0<e;)e--,!1===b.isStubElement(d[e])&&(!c||!1!==c.call(this,d[e]))&&b.remove(d[e])};b.create=
function(a){return f(a)[0]};b.find=function(a,b){return f(a).find(b)};b.children=function(a,b){return f(a).children(b)};b.parent=function(a,b){return f(a).parent(b)[0]};b.parents=function(a,b){return f(a).parents(b)};b.is=function(a,b){return f(a).is(b)};b.extend=function(a,b,d,e){return f.extend.apply(this,arguments)};b.walk=function(a,c,d){a&&(d||(d=0),!1!==c.call(this,a,d)&&(a.childNodes&&0<a.childNodes.length?b.walk(a.firstChild,c,d+1):a.nextSibling?b.walk(a.nextSibling,c,d):a.parentNode&&a.parentNode.nextSibling&&
b.walk(a.parentNode.nextSibling,c,d-1)))};b.revWalk=function(a,c){a&&!1!==c.call(this,a)&&(a.childNodes&&0<a.childNodes.length?b.walk(a.lastChild,c):a.previousSibling?b.walk(a.previousSibling,c):a.parentNode&&a.parentNode.previousSibling&&b.walk(a.parentNode.previousSibling,c))};b.setStyle=function(a,b,d){a&&f(a).css(b,d)};b.getStyle=function(a,b){return f(a).css(b)};b.hasClass=function(a,b){return f(a).hasClass(b)};b.addClass=function(a,b){f(a).addClass(b)};b.removeClass=function(a,b){f(a).removeClass(b)};
b.preventDefault=function(a){a.preventDefault();b.stopPropagation(a)};b.stopPropagation=function(a){a.stopPropagation()};b.each=function(a,b){f.each(a,function(a,e){b.call(this,a,e)})};b.foreach=function(a,b){var d,e;if(a instanceof Array||a instanceof NodeList||"undefined"!=typeof a.length&&"undefined"!=typeof a.item){e=a.length;for(var f=0;f<e&&!(d=b.call(this,f,a[f]),!1===d);f++);}else for(e in a)if(!0===a.hasOwnProperty(e)&&(d=b.call(this,e),!1===d))break};b.isBlank=function(a){return!a||o.test(a)};
b.isFn=function(a){return"function"===typeof a};b.isObj=function(a){return null!==a&&"object"===typeof a};b.isset=function(a){return"undefined"!==typeof a&&null!==a};b.isArray=function(a){return f.isArray(a)};b.isNumeric=function(a){return null!==a.match(p)};b.getUniqueId=function(){var a=(new Date).getTime(),b=Math.ceil(1E6*Math.random());return(a+""+b).substr(5,18).replace(/,/,"")};b.inArray=function(a,b){for(var d=b.length,e=0;e<d;e++)if(a===b[e])return!0;return!1};b.arrayDiff=function(a,c,d){var e=
a.length,f,g=[];for(f=0;f<e;f++)!1===b.inArray(a[f],c)&&g.push(a[f]);if(!0!==d){e=c.length;for(f=0;f<e;f++)!1===b.inArray(c[f],a)&&g.push(c[f])}return g};b.arrayMerge=function(a,b){var d=b.length,e;for(e=0;e<d;e++)a.push(b[e]);return a};b.stripTags=function(a,c){if("string"===typeof c){var d=f("<div>"+a+"</div>");d.find("*").not(c).remove();return d.html()}for(var e=RegExp(/<\/?(\w+)((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/gim),i=a;null!=(d=e.exec(a));)if(!1===b.isset(c)||!0!==b.inArray(d[1],
c))i=i.replace(d[0],"");return i};b.browser=function(){if(h)return f.extend({},h);var a,b,d=navigator.userAgent.toLowerCase();a=d.toLowerCase();b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];a=b[1]||"";b=b[2]||"0";var e={type:"unknown",version:0,msie:!1};a&&(e[a]=!0,e.version=b||0,e.type=a);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0);
e.webkit&&(e.type="webkit");e.firefox=!0==/firefox/.test(d);e.msie||(e.msie=!!/trident/.test(d));h=e;return f.extend({},h)};b.getBrowserType=function(){if(null===this._browserType){for(var a=["msie","firefox","chrome","safari"],b=a.length,d=0;d<b;d++)if(!0===RegExp(a[d],"i").test(navigator.userAgent))return this._browserType=a[d];this._browserType="other"}return this._browserType};b.getWebkitType=function(){return"webkit"!==b.browser().type?(console.log("Not a webkit!"),!1):0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")?
"safari":"chrome"};b.isBrowser=function(a){return b.browser().type===a};b.getBlockParent=function(a,c){if(!0===b.isBlockElement(a))return a;if(a)for(;a.parentNode;){a=a.parentNode;if(!0===b.isBlockElement(a))return a;if(a===c)break}return null};b.findNodeParent=function(a,c,d){if(a)for(;a.parentNode&&a!==d;){if(!0===b.is(a,c))return a;a=a.parentNode}return null};b.onBlockBoundary=function(a,c,d){if(!a||!c)return!1;a=b.isChildOfTagNames(a,d)||b.is(a,d.join(", "))&&a||null;c=b.isChildOfTagNames(c,d)||
b.is(c,d.join(", "))&&c||null;return a!==c};b.isOnBlockBoundary=function(a,c,d){if(!a||!c)return!1;a=b.getBlockParent(a,d)||b.isBlockElement(a,d)&&a||null;c=b.getBlockParent(c,d)||b.isBlockElement(c,d)&&c||null;return a!==c};b.mergeContainers=function(a,c){if(!a||!c)return!1;if(a.nodeType===b.TEXT_NODE||b.isStubElement(a))c.appendChild(a);else if(a.nodeType===b.ELEMENT_NODE){for(;a.firstChild;)c.appendChild(a.firstChild);b.remove(a)}return!0};b.mergeBlockWithSibling=function(a,c,d){var e=d?f(c).next().get(0):
f(c).prev().get(0);d?b.mergeContainers(e,c):b.mergeContainers(c,e);a.collapse(!0);return!0};b.date=function(a,c,d){if(null===c&&d&&(c=b.tsIso8601ToTimestamp(d),!c))return;for(var c=new Date(c),a=a.split(""),d=a.length,e="",f=0;f<d;f++){var g="",h=a[f];switch(h){case "D":case "l":g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[c.getDay()];"D"===h&&(g=g.substring(0,3));break;case "F":case "m":g=c.getMonth()+1;10>g&&(g="0"+g);break;case "M":months="January February March April May June July August September October November December".split(" ");
g=months[c.getMonth()];"M"===h&&(g=g.substring(0,3));break;case "d":g=c.getDate();break;case "S":g=b.getOrdinalSuffix(c.getDate());break;case "Y":g=c.getFullYear();break;case "y":g=c.getFullYear();g=g.toString().substring(2);break;case "H":g=c.getHours();break;case "h":g=c.getHours();0===g?g=12:12<g&&(g-=12);break;case "i":g=b.addNumberPadding(c.getMinutes());break;case "a":g="am";12<=c.getHours()&&(g="pm");break;default:g=h}e+=g}return e};b.getOrdinalSuffix=function(a){var b="",b=a%100;if(4<=b&&
20>=b)b="th";else switch(a%10){case 1:b="st";break;case 2:b="nd";break;case 3:b="rd";break;default:b="th"}return b};b.addNumberPadding=function(a){10>a&&(a="0"+a);return a};b.tsIso8601ToTimestamp=function(a){if(a=a.match(RegExp(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(?:Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/))){var b=new Date;b.setDate(a[3]);b.setFullYear(a[1]);b.setMonth(a[2]-1);b.setHours(a[4]);b.setMinutes(a[5]);b.setSeconds(a[6]);var d=60*a[9];"+"===
a[8]&&(d*=-1);d-=b.getTimezoneOffset();return b.getTime()+6E4*d}return null};b.normalizeNode=function(a,b){if(a)return!0!==b&&"function"==typeof a.normalize?a.normalize():m(a)};this.dom=b}).call(this.ice,window.jQuery);