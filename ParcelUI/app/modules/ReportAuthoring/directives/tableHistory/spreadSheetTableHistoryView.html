<div cg-busy="tableHistory.waitingProcessResources">
    <div class="modal-header">
        <button type="button" class="close" aria-label="Close" ng-click="tableHistory.closeTableHistory()"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Detail Table History</h4>
    </div>

    <div class="modal-body">

        <div class="alert alert-danger alert-dismissible top-margin-xs" role="alert" ng-show="!tableHistory.tableHistory.length && tableHistory.isTableHistoryLoaded">
            Table history not found </div>
        
        <div class="alert top-margin-xs" ng-class="tableHistory.alertClass" role="alert" ng-show="tableHistory.showMsgTableOperation">{{tableHistory.msgTableOperation}}
            <button type="button" class="close" aria-label="Close" ng-click="tableHistory.showMsgTableOperation=false"><span aria-hidden="true">&times;</span>
            </button>
        </div>
        
        <div class="bottom-margin-sm" ng-show="tableHistory.editMode">
            <button class="btn btn-primary" ng-click="tableHistory.appendTableHistory()">Append to Current Table</button>
            <button class="btn btn-primary" ng-click="tableHistory.overwriteTableHistory()">Overwrite Current Table</button>
            <button class="btn btn-primary" ng-click="tableHistory.closeTableHistory()">Close Window</button>
        </div>

        <div ng-repeat="data in tableHistory.tableHistory">
            <div class="alert alert-info">
                    <input type="radio" name="historyID" id="" ng-show="tableHistory.editMode" ng-model="$index" ng-click="tableHistory.setSelectedTable(data)">&nbsp;
                    {{data.createdBy.firstName}} {{data.createdBy.lastName}} performed a <span ng-if="data.section.sectionData.operationCode">{{data.section.sectionData.operationCode}}</span><span ng-if="!data.section.sectionData.operationCode">DEFAULT INSERT</span> at {{ tableHistory.convertTime(data.createDate) | date:'hh:mm:ss a' }} on {{ tableHistory.convertDate(data.createDate) | date:'MMM dd, yyyy' }}</div>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered table-condensed">
                        <thead>
                            <th ng-repeat="col in data.section.sectionData.contentValues[tableHistory.tableName].structure">{{col.label}}</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="row in data.section.sectionData.contentValues[tableHistory.tableName].data">
                                <td ng-repeat="col in data.section.sectionData.contentValues[tableHistory.tableName].structure | filter: { rowIndex : rowIndexVal } | orderBy: 'columnIndex'" width="{{col.width}}" style="text-align: {{col.align}};" ng-bind-html="tableHistory.trustAsHtml(row[col.label])"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
        </div>
        
        <div ng-show="tableHistory.tableHistory.length>1 && tableHistory.editMode" class="bottom-margin-sm">
            <button class="btn btn-primary" ng-click="tableHistory.appendTableHistory()">Append to Current Table</button>
            <button class="btn btn-primary" ng-click="tableHistory.overwriteTableHistory()">Overwrite Current Table</button>
            <button class="btn btn-primary" ng-click="tableHistory.closeTableHistory()">Close Window</button>
        </div>
    </div>

    <!--<div class="modal-footer">
        <button class="btn btn-default" ng-click="tableHistory.closeTableHistory()">Close</button>
    </div>-->
</div>