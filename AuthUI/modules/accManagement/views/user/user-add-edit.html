<h4 ng-show="!userCtrl.isEditUser" class="text-uppercase">ADDING NEW USER TO {{parentEntityName}}</h4>
<div id="alertMessage" class="alert alert-danger" role="alert" ng-show="userCtrl.editNotAuthorized">
    <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> You are not authorized to edit this user.
</div>
<form class="form-horizontal border-top" name="userForm" ng-show="userCtrl.showUserEditForm" novalidate>
    <div class="row">
        <div class="col-lg-6 col-sm-6 col-md-6 col-xs-12">
            <div class="form-group required">
                <label for="email" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Email:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12" field-validation="Email">
                    <input type="email" class="form-control" name="email" id="email" required ng-model="userCtrl.email">
                </div>
            </div>

            <div class="form-group required">
                <label for="firstName" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">First Name:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12" field-validation="First Name">
                    <input type="text" class="form-control" name="firstName" id="firstName" required ng-model="userCtrl.firstname">
                </div>
            </div>

            <div class="form-group">
                <label for="middleInitial" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Middle Initial:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <input type="text" class="form-control" id="middleInitial" name="middleInitial" ng-model="userCtrl.middlename">
                </div>
            </div>

            <div class="form-group required">
                <label for="lastName" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Last Name:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12" field-validation="Last Name">
                    <input type="text" class="form-control" name="lastName" id="lastName" required ng-model="userCtrl.lastname">
                </div>
            </div>

            <div class="form-group">
                <label for="userTitle" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Title:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <textarea cols="21" rows="2" class="form-control" id="userTitle" name="userTitle" ng-model="userCtrl.title"></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-4 col-sm-4 col-md-4 control-label">Environmental Professional (as defined by AAI Rule)? <a class="pointer" data-toggle="tooltip" data-placement="top" title="How does AAI define and Environmental Professional? Click to know more." ng-click="userCtrl.openHelpModal('helpEP.html');"><i class="glyphicon glyphicon-question-sign"></i></a></label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <div class="radio">
                        <label class="radio-inline" for="EpYes">
                            <input id="EpYes" type="radio" ng-value="true" ng-model="userCtrl.IsEnvProfessional" name="isEpRadioYes">Yes</label>
                        <label class="radio-inline" for="EpNo">
                            <input id="EpNo" type="radio" ng-value="false" ng-model="userCtrl.IsEnvProfessional" name="isEpRadioNo">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group" ng-show="userCtrl.isEditUser">
                <label class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Allow Administrators to sign for me: <a class="pointer" data-toggle="tooltip" data-placement="top" title="How can others use my signature? Click to know more." ng-click="userCtrl.openHelpModal('helpSignFor.html');"><i class="glyphicon glyphicon-question-sign"></i></a></label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <div class="radio">
                        <label class="radio-inline" for="allowAdmintoSignInYes">
                            <input id="allowAdmintoSignInYes" type="radio" ng-model="userCtrl.IsAllowAdmintoSignIn" ng-value="true" name="allowSignYes">Yes</label>
                        <label class="radio-inline" for="allowAdmintoSignInNo">
                            <input id="allowAdmintoSignInNo" type="radio" ng-model="userCtrl.IsAllowAdmintoSignIn" ng-value="false" name="allowSignNo">No
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="cellNumber" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Direct or Cell: </label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <input type="text" class="form-control" id="cellNumber" name="cellNumber" ng-model="userCtrl.cell">
                </div>
            </div>
        </div>

        <div class="col-lg-6 col-sm-6 col-md-6 col-xs-12">
            <div class="form-group required">
                <label for="role" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label align-left">Default Access Level:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12" field-validation="Role">
                    <select name="role" id="role" class="form-control" id="role" required ng-model="userCtrl.userRoleGuid">
                        <option value="">Select a Role...</option>
                        <option ng-repeat="role in userCtrl.roles | orderBy:'roleName'" value="{{role.roleGUID}}" ng-bind="role.roleName"></option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="employeeNumber" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Employee #:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <input type="text" class="form-control" id="employeeNumber" name="employeeNumber" ng-model="userCtrl.employeeNumber">
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-4 col-sm-4 col-md-4 control-label">Grant Access to All of my Reports</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12 checkbox">
                    <label>
                        <input name="grantAccessReports" type="checkbox" ng-Checked="userCtrl.grantAccess()" ng-model="userCtrl.grantAccessVal">
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label for="emailClosing" class="col-lg-4 col-sm-4 col-md-4 col-xs-12 control-label">Email Closing:</label>
                <div class="col-lg-7 col-sm-7 col-md-7 col-xs-12">
                    <textarea cols="21" rows="2" class="form-control" id="emailClosing" name="emailClosing" ng-model="userCtrl.emailClosing"></textarea>
                </div>
            </div>
        </div>
    </div>

    <hr ng-if="userCtrl.isEditUser">

    <div class="row" ng-if="userCtrl.isEditUser">
        <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
            <h4>ADD QUALIFICATIONS</h4>
            <div class="alert" ng-class="userCtrl.qualificationAlertClass" role="alert" ng-show="userCtrl.qualificationUserMessage">
                <button type="button" class="close" aria-label="Close" ng-click="userCtrl.qualificationUserMessage = ''" ng-hide="userCtrl.hideControls.qualificationFileUpload">
                    <span aria-hidden="true">&times;</span>
                </button>
                <span ng-bind-html="userCtrl.qualificationUserMessage"></span>
            </div>
            <div class="form-group" ng-if="!userCtrl.hideControls.qualificationFileUpload">
                <div class="col-md-8 col-lg-8">
                    <span class="fa fa-lg" ng-class="{'fa-check text-success' : userCtrl.qualificationsFileCoreFileUrl, 'fa-times text-danger' : !userCtrl.qualificationsFileCoreFileUrl}">&nbsp;</span>
                    <span class="btn btn-md btn-default fileinput-button"><i class="fa fa-file-text-o"></i> Attach
                        <input id="qualificationsFile" name="qualificationsFile" type="file" data-file-input="files" ng-model="userCtrl.qualificationfile" ngf-select ngf-change="userCtrl.checkFile($file,$invalidFiles,'qualification')" ngf-multiple="false" ngf-pattern="'.pdf'" ngf-max-total-size="'1MB'">
                    </span>
                    <span class="text-primary" ng-show="userCtrl.qualificationfile.name"><i class="fa fa-file-pdf-o"></i> {{userCtrl.qualificationfile.name}}</span>
                </div>
                <div class="col-md-4 col-lg-4" ng-show="userCtrl.qualificationsFileCoreFileUrl">
                    <h5>Qualifications file has been uploaded. <a ng-href="{{userCtrl.qualificationsFileCoreFileUrl}}" target="_blank">View File.</a></h5>
                </div>
            </div>

            <div class="form-group" ng-if="!userCtrl.hideControls.qualificationFileUpload">
                <div class="col-md-12 col-lg-12">
                    <div>Qualifications file must be a PDF file of less than 1 MB</div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" ng-show="userCtrl.isEditUser">
        <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
            <h4>ADD SIGNATURE IMAGE</h4>
            <div class="alert" ng-class="userCtrl.signatureAlertClass" role="alert" ng-show="userCtrl.signatureUserMessage">
                <button type="button" class="close" aria-label="Close" ng-click="userCtrl.signatureUserMessage = ''" ng-hide="userCtrl.hideControls.signatureFileUpload">
                    <span aria-hidden="true">&times;</span>
                </button>
                <span ng-bind-html="userCtrl.signatureUserMessage"></span>
            </div>
            <div class="form-group" ng-if="!userCtrl.hideControls.signatureFileUpload">
                <div class="col-md-8 col-lg-8">
                    <span class="fa fa-lg" ng-class="{'fa-check text-success' : userCtrl.signatureFileCoreFileUrl, 'fa-times text-danger' : !userCtrl.signatureFileCoreFileUrl}">&nbsp;</span>
                    <span class="btn btn-md btn-default fileinput-button"><i class="fa fa-file-text-o"></i> Attach
                        <input id="signatureFile" name="signatureFile" type="file" data-file-input="files" ng-model="userCtrl.signaturefile" ngf-select ngf-change="userCtrl.checkFile($file,$invalidFiles,'signature')" ngf-multiple="false" accept="image/*" ngf-pattern="'.jpg,.jpeg,.JPG,.JPEG'" ngf-max-total-size="'1MB'">
                    </span>
                    <span class="text-primary" ng-show="userCtrl.signaturefile.name"><i class="fa fa-file-image-o"></i> {{userCtrl.signaturefile.name}}</span>
                </div>
                <div class="col-md-4 col-lg-4" ng-show="userCtrl.signatureFileCoreFileUrl">
                    <h5>Signature image has been uploaded.</h5>
                </div>
            </div>
            <div class="form-group" ng-if="!userCtrl.hideControls.signatureFileUpload">
                <div class="col-md-12 col-lg-12">
                    <div class="help-block">Signature image must be a JPEG image of less than 1 MB</div>
                </div>
            </div>
        </div>
    </div>

    <hr ng-if="userCtrl.isEditUser">

    <div ng-if="userCtrl.isEditUser" class="row">
        <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
            <h4>Data Provider Accounts:</h4>
        </div>
    </div>
    <div ng-if="userCtrl.isEditUser" class="row">
        <div class="col-lg-2 text-center">
            <div class="text-center"><img src="images/edrLogo.gif">
                <br><strong>Environmental Data Resources</strong></div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label for="edrAccountNo" class="col-sm-3 control-label">Account#:</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" ng-model="userCtrl.edrAccountNumber" id="edrAccountNo" name="edrAccountNo">
                </div>
            </div>
            <div class="form-group">
                <label for="edrPassword" class="col-sm-3 control-label">Password:</label>
                <div class="col-sm-9">
                    <input type="password" class="form-control" ng-model="userCtrl.edrAccountPassword" id="edrPassword" name="edrPassword">
                </div>
            </div>
        </div>
    </div>

    <hr ng-if="!userCtrl.isEditUser">

    <div class="row" ng-if="!userCtrl.isEditUser">
        <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
            <h4>Options for the Default Access Level</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-condensed table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th>This role is for individuals who...</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="role in userCtrl.roles">
                            <td ng-bind="role.roleName"></td>
                            <td ng-bind="role.roleDescription"></td>
                        </tr>
                        <tr>
                            <td colspan="2">*** Note: you may or may not see all of these options, depending on your own access level. ***</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <hr ng-if="userCtrl.isEditUser">

    <div class="row">
        <div class="col-sm-12 text-center">
            <div class="form-group">
                <button type="reset" class="btn btn-md btn-default" ng-click="userCtrl.cancelUserCreation();">CANCEL</button>
                <button type="submit" class="btn btn-md btn-primary" ng-click="userCtrl.saveUserData(userForm);">SUBMIT</button>
            </div>
        </div>
    </div>
</form>